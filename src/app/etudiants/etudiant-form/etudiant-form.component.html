<div class="container mt-4">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">
        <i class="bi" [ngClass]="id ? 'bi-pencil-square' : 'bi-person-plus'"></i>
        {{ id ? 'Modifier' : 'Ajouter' }} un étudiant
      </h2>
    </div>
    <div class="card-body">
      <form [formGroup]="form" (ngSubmit)="submit()" class="needs-validation">
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="nom" class="form-label">Nom</label>
            <input id="nom" formControlName="nom" class="form-control" [ngClass]="{'is-invalid': form.get('nom')?.invalid && form.get('nom')?.touched}" />
            <div class="invalid-feedback" *ngIf="form.get('nom')?.invalid && form.get('nom')?.touched">
              <i class="bi bi-exclamation-triangle me-1"></i>Nom requis (min 2 caractères).
            </div>
          </div>
          
          <div class="col-md-6">
            <label for="prenom" class="form-label">Prénom</label>
            <input id="prenom" formControlName="prenom" class="form-control" [ngClass]="{'is-invalid': form.get('prenom')?.invalid && form.get('prenom')?.touched}" />
            <div class="invalid-feedback" *ngIf="form.get('prenom')?.invalid && form.get('prenom')?.touched">
              <i class="bi bi-exclamation-triangle me-1"></i>Prénom requis.
            </div>
          </div>
        </div>
        
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="email" class="form-label">Email</label>
            <input id="email" type="email" formControlName="email" class="form-control" [ngClass]="{'is-invalid': form.get('email')?.invalid && form.get('email')?.touched}" />
            <div class="invalid-feedback" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
              <i class="bi bi-exclamation-triangle me-1"></i>Email invalide.
            </div>
          </div>
          
          <div class="col-md-6">
            <label for="filiere" class="form-label">Filière</label>
            <input id="filiere" formControlName="filiere" class="form-control" />
          </div>
        </div>
        
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="dateNaissance" class="form-label">Date de naissance</label>
            <input id="dateNaissance" type="date" formControlName="dateNaissance" class="form-control" />
          </div>
          
          <div class="col-md-6">
            <label for="telephone" class="form-label">Téléphone</label>
            <input id="telephone" formControlName="telephone" class="form-control" />
          </div>
        </div>
        
        <div class="d-flex justify-content-between mt-4">
          <a routerLink="/etudiants" class="btn btn-secondary">
            <i class="bi bi-arrow-left me-1"></i>Retour
          </a>
          <button type="submit" class="btn btn-primary" [disabled]="submitting || form.invalid">
            <i class="bi" [ngClass]="id ? 'bi-save' : 'bi-plus-circle'"></i>
            {{ id ? 'Mettre à jour' : 'Créer' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
